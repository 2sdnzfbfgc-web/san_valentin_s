<!doctype html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>¬øQuieres ser mi San Valent√≠n?</title>
    <style>
/* inlined styles.css */
:root{
  --bg-top:#fff8fb;
  --bg-bottom:#fff0f6;
  --card:#fffdfd;
  --accent:#ff4d87;
  --accent-2:#ffd166;
  --text:#2b2b2b;
}
*{box-sizing:border-box}
.body-bg{min-height:100vh}
  body{margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial;color:var(--text);min-height:100vh;display:flex;align-items:center;justify-content:center}
body::before{content:"";position:fixed;inset:0;background:linear-gradient(180deg,var(--bg-top),var(--bg-bottom));z-index:-2}
body::after{content:"";position:fixed;inset:0;background:radial-gradient(circle at 10% 10%, rgba(255,200,220,0.08), transparent 8%), radial-gradient(circle at 90% 90%, rgba(200,240,255,0.06), transparent 12%);z-index:-1}
.center{width:100%;max-width:520px;padding:28px}
.card{background:linear-gradient(180deg, #ffffff, #fff8fb);border-radius:18px;box-shadow:0 12px 40px rgba(0,0,0,0.08);padding:34px;text-align:center;border:1px solid rgba(255,80,120,0.06)}
h1{margin:0 0 12px;font-size:1.8rem}
.subtitle{margin:6px 0 18px;color:#7a7a8a}
.buttons{display:flex;gap:12px;justify-content:center;margin-bottom:8px}
.btn{padding:12px 22px;border-radius:10px;border:none;font-size:1rem;cursor:pointer;box-shadow:0 6px 12px rgba(0,0,0,0.06)}
.btn.yes{background:linear-gradient(90deg,var(--accent),#ff7bb3);color:#fff}
.btn.no{background:#fff6f8;color:#6b6b6b;border:1px solid rgba(0,0,0,0.04)}
.response{margin-top:18px}
.hidden{display:none}
.emoji{font-size:56px;margin-bottom:8px}
.message{font-size:1.05rem;margin:0}
.heart{animation:pop 700ms ease forwards}
@keyframes pop{0%{transform:scale(0.2);opacity:0}60%{transform:scale(1.08);opacity:1}100%{transform:scale(1)}}
.small{font-size:0.9rem;color:#666;margin-top:8px}
.lives{margin-top:10px;color:#b33; font-weight:600}
.btn:disabled{opacity:0.6;cursor:default}

/* Modal carta */
.modal{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;z-index:60}
.modal.hidden{display:none}
.modal-backdrop{position:absolute;inset:0;background:rgba(0,0,0,0.35)}
.modal-content{position:relative;background:linear-gradient(180deg,#fff,#fff7fb);padding:20px 22px;border-radius:18px;box-shadow:0 12px 40px rgba(0,0,0,0.18);max-width:720px;width:90%;text-align:center;z-index:2}
.modal-content .close{position:absolute;right:10px;top:6px;border:none;background:transparent;font-size:26px;cursor:pointer}
.dog-illustration{margin-bottom:8px}
.letter{background:linear-gradient(180deg,#fff,#fff7fb);padding:16px;border-radius:12px;border:1px dashed rgba(255,100,140,0.22);color:#333;font-size:1.05rem;box-shadow:0 8px 24px rgba(255,100,140,0.04)}

/* Corazones flotantes */
.hearts{position:absolute;inset:0;pointer-events:none;overflow:hidden}
.heart{
  position:absolute;left:50%;transform:translateX(-50%);
  width:28px;height:28px;background:transparent;color:#ff5577;font-size:22px;animation:floatUp 3500ms linear forwards;opacity:0.95}
@keyframes floatUp{0%{transform:translateY(20px) scale(0.8);opacity:0}30%{opacity:1}100%{transform:translateY(-220px) scale(1.15);opacity:0}}

/* Confetti */
#confetti{position:fixed;inset:0;pointer-events:none;overflow:hidden;z-index:55}
.confetti-piece{position:absolute;width:10px;height:14px;opacity:0.95;transform-origin:center;animation:fall 2400ms linear forwards}
@keyframes fall{0%{transform:translateY(-10vh) rotate(0deg)}100%{transform:translateY(110vh) rotate(540deg)}}

/* Sobre (intro) */
.envelope{width:240px;height:136px;margin:6px auto 8px;position:relative;cursor:pointer;perspective:800px}
.envelope .env-body{width:100%;height:72%;background:linear-gradient(180deg,#fff,#fff6f8);border-radius:10px;border:2px solid rgba(255,140,170,0.18);box-shadow:0 6px 18px rgba(255,80,120,0.06) inset}
.envelope .env-top{position:absolute;left:0;right:0;top:0;height:64%;background:linear-gradient(180deg,#ffeef6,#fff);border-bottom:2px solid rgba(255,140,170,0.18);transform-origin:top center;transition:transform 550ms cubic-bezier(.2,.9,.3,1)}
.envelope .env-top:before{content:"";position:absolute;left:0;right:0;bottom:0;height:60%;background:linear-gradient(180deg,rgba(255,255,255,0.6),transparent);}
.envelope.open .env-top{transform:rotateX(-160deg);}
.envelope:after{content:"";position:absolute;left:8px;right:8px;top:44%;height:2px;background:linear-gradient(90deg,#fff0f6, rgba(255,255,255,0.4));opacity:0.6;transform:skewX(-12deg)}
.open-hint{text-align:center;color:#8a8a8a;margin-top:6px;font-weight:600}

/* Pantalla negra final */
.final-black{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#0b0b0b,#2b002b);z-index:120}
.final-black.hidden{display:none}
.final-black-content{color:#fff;font-size:1.6rem;padding:20px;text-align:center;background:linear-gradient(90deg, rgba(255,120,180,0.08), rgba(160,120,255,0.06));border-radius:12px;padding:28px}

/* Estilo final-letter (mensaje de S√≠) */
.final-letter{background:linear-gradient(180deg,#fff8f9,#fff1fb);border-radius:14px;padding:22px;border:1px solid rgba(255,100,140,0.2);box-shadow:0 18px 60px rgba(255,100,140,0.06)}
.final-letter h2{color:var(--accent);margin:0 0 8px}
.final-letter p{color:#4b3b4b;line-height:1.5}
.final-letter .accent-line{color:var(--accent-2);font-weight:700;margin-top:8px}

    </style>
  </head>
  <body>
    <main class="center hidden" id="mainCard">
      <div class="card" id="card">
        <h1>¬øQuieres ser mi San Valent√≠n?</h1>
        <p class="subtitle">Pulsa una opci√≥n y veremos qu√© pasa ‚ù§Ô∏è</p>
        <div id="buttons" class="buttons">
          <button id="yes" class="btn yes">S√≠</button>
          <button id="no" class="btn no">No</button>
        </div>

        <div id="response" class="response hidden">
          <div id="emoji" class="emoji"></div>
          <p id="message" class="message"></p>
          <div id="lives" class="lives hidden">Vidas: <span id="count">3</span></div>
        </div>
      </div>
    </main>

    <!-- Intro modal: sobre interactivo -->
    <div id="introModal" class="modal">
      <div class="modal-backdrop"></div>
      <div class="modal-content">
        <div id="envelope" class="envelope" role="button" tabindex="0" aria-label="Pulsa para abrir el sobre">
          <div class="env-top"></div>
          <div class="env-body"></div>
        </div>
        <p class="open-hint">Pulsa para abrir</p>
        <div class="letter hidden" id="introText">
          <p>Para ti...</p>
        </div>
      </div>
    </div>

    <!-- Pantalla negra final al pulsar el bot√≥n No m√≥vil -->
    <div id="finalBlack" class="final-black hidden">
      <div class="final-black-content">mmm ya as√≠ nos llevamos</div>
    </div>

<!-- Modal carta + corazones -->
<div id="letterModal" class="modal hidden">
  <div class="modal-backdrop"></div>
  <div class="modal-content">
    <button id="closeLetter" class="close">√ó</button>
    <div class="dog-illustration" aria-hidden="true">
      <!-- ilustraci√≥n de perrito simple (original) -->
      <svg width="140" height="100" viewBox="0 0 140 100" xmlns="http://www.w3.org/2000/svg">
        <g fill="none" stroke="#333" stroke-linecap="round" stroke-linejoin="round" stroke-width="2">
          <ellipse cx="70" cy="62" rx="36" ry="22" fill="#fff5f9" stroke="none"/>
          <path d="M30 55 q10 -24 40 -26 q30 2 40 26" fill="#fff5f9" stroke="#333"/>
          <circle cx="55" cy="48" r="3" fill="#333"/>
          <circle cx="85" cy="48" r="3" fill="#333"/>
          <path d="M68 60 q-4 6 -10 6" stroke="#333" fill="none"/>
        </g>
      </svg>
    </div>

    <div class="letter">
      <p>Gracias por estar en mi vida mi hermosa novia, te amo muchoooooo. Eres la mejor novia y una mujer perfecta. Perd√≥n que no vamos a estar juntos este San Valent√≠n y recuerda que eres una ni√±a fuerte. Te amo mucho m√°s que las estrellas.</p>
    </div>
    <div id="hearts" class="hearts"></div>
  </div>
</div>

<!-- Contenedor de confetti -->
<div id="confetti"></div>

    <script>
// inlined script.js (modificado para intro y comportamiento din√°mico)
document.addEventListener('DOMContentLoaded', () => {
  const mainCard = document.getElementById('mainCard');
  const yes = document.getElementById('yes');
  const no = document.getElementById('no');
  const response = document.getElementById('response');
  const emoji = document.getElementById('emoji');
  const message = document.getElementById('message');
  const livesWrap = document.getElementById('lives');
  const count = document.getElementById('count');

  const introModal = document.getElementById('introModal');
  const envelope = document.getElementById('envelope');
  const introText = document.getElementById('introText');
  const finalBlack = document.getElementById('finalBlack');

  let lives = 4; // usar 4 vidas seg√∫n petici√≥n
  let angerLevel = 0;
  let movingNoInterval = null;

  function showResponse(face, text) {
    emoji.textContent = face;
    message.textContent = text;
    response.classList.remove('hidden');
  }

  // Secuencia de introducci√≥n al pulsar "Abrir"
  // Al pulsar el sobre: animar apertura y mostrar la secuencia de texto
  envelope.addEventListener('click', () => {
  envelope.classList.add('open');
  setTimeout(()=>{
      // mostrar el contenido interno como carta (secuencia m√°s lenta)
      const seq = [
        'Para ti Saiomi',
        'No sab√≠a c√≥mo dec√≠rtelo',
        'Desde que llegaste a mi vida todo ha sido mejor',
        '...'
      ];
      let i = 0;
      introText.classList.remove('hidden');
      introText.querySelector('p').textContent = seq[i];
      const t = setInterval(() => {
        i++;
        if (i < seq.length) {
          introText.querySelector('p').textContent = seq[i];
        } else {
          clearInterval(t);
          // mostrar pregunta principal
          introModal.classList.add('hidden');
          mainCard.classList.remove('hidden');
        }
      }, 2200);
    }, 520);
  });

  yes.addEventListener('click', () => {
    yes.disabled = true;
    no.disabled = true;
    showFinalLetter();
  });

  // mover el bot√≥n No a coordenadas aleatorias
  function moveNoButton(el){
    el.style.position = 'fixed';
    const padding = 20;
    const maxLeft = Math.max(0, window.innerWidth - el.offsetWidth - padding);
    const maxTop = Math.max(60, window.innerHeight - el.offsetHeight - padding);
    const left = Math.floor(Math.random() * maxLeft) + padding;
    const top = Math.floor(Math.random() * (maxTop - 60)) + 60;
    el.style.left = left + 'px';
    el.style.top = top + 'px';
  }

  function spawnAngryClones(aroundEl, amount){
    const rect = aroundEl.getBoundingClientRect();
    for(let i=0;i<amount;i++){
      const node = document.createElement('div');
      node.className = 'emoji clone-anger';
      node.textContent = angerEmoji();
      node.style.position = 'fixed';
      const x = rect.left + (Math.random()-0.5) * 80;
      const y = rect.top + (Math.random()-0.5) * 40;
      node.style.left = Math.min(Math.max(8, x), window.innerWidth-40) + 'px';
      node.style.top = Math.min(Math.max(40, y), window.innerHeight-40) + 'px';
      node.style.fontSize = `${18 + Math.random()*18}px`;
      document.body.appendChild(node);
      setTimeout(()=>node.remove(), 1600 + Math.random()*1200);
    }
  }

  function angerEmoji(){
    if (angerLevel <= 1) return 'üò†';
    if (angerLevel === 2) return 'üò°';
    return 'üò§';
  }

  no.addEventListener('click', () => {
    if (lives <= 0) return;
    lives = Math.max(0, lives - 1);
    angerLevel++;
    livesWrap.classList.remove('hidden');
    count.textContent = lives;
    showResponse(angerEmoji(), `Te quedan ${lives} vidas`);

    // duplicar m√°s emojis seg√∫n cu√°ntas veces ha dicho no
    spawnAngryClones(no, Math.min(6, 1 + angerLevel));

    // mover el bot√≥n No
    moveNoButton(no);

    if (lives === 0) {
      // quitar bot√≥n no y dejar solo s√≠
      no.style.display = 'none';
      // crear bot√≥n No "escondido" que camina
      createMovingHiddenNo();
    }
  });

  // --- Carta final y animaciones ---
  const modal = document.getElementById('letterModal');
  const closeLetter = document.getElementById('closeLetter');
  const confettiRoot = document.getElementById('confetti');
  const heartsRoot = document.getElementById('hearts');

  function showFinalLetter(){
    response.classList.add('hidden');
    // construir mensaje final con m√°s color y formato
    const finalMsg = `
      <div class="final-letter">
        <h2>Feliz San Valent√≠n, mi amor üíñ</h2>
        <p>Gracias por estar siempre a mi lado, aunque la distancia a veces nos separe. Perd√≥n si no siempre puedo estar contigo f√≠sicamente, pero quiero que sepas que siempre te llevo en mi coraz√≥n. Gracias por hacer mis d√≠as m√°s felices y llenos de luz ‚ú®.</p>
        <p>Eres una ni√±a hermosa y fuerte, y s√© que aunque la vida traiga problemas, Dios siempre te cuidar√°. Te amo con todo mi coraz√≥n y siempre lo har√© ‚ù§Ô∏è.</p>
        <p class="accent-line">Te amo m√°s que las estrellas ‚ú®</p>
      </div>
    `;
    const letterEl = modal.querySelector('.letter');
    if(letterEl){
      letterEl.innerHTML = finalMsg;
    }
    modal.classList.remove('hidden');
    spawnConfetti(110);
    spawnHearts(36);
  }

  function hideLetter() {
    modal.classList.add('hidden');
    confettiRoot.innerHTML = '';
    heartsRoot.innerHTML = '';
  }

  closeLetter.addEventListener('click', hideLetter);

  // Generar confetti como elementos div
  function spawnConfetti(amount){
    const colors = ['#ff5c8a','#ffd166','#6fe7c1','#ff8fab','#8ec5ff'];
    for(let i=0;i<amount;i++){
      const el = document.createElement('div');
      el.className = 'confetti-piece';
      const size = Math.floor(Math.random()*12)+8;
      el.style.width = `${size}px`;
      el.style.height = `${Math.floor(size*1.2)}px`;
      el.style.background = colors[Math.floor(Math.random()*colors.length)];
      el.style.left = Math.random()*100 + '%';
      el.style.top = (Math.random()*10 - 10) + 'vh';
      el.style.transform = `rotate(${Math.random()*360}deg)`;
      el.style.animationDuration = `${1800 + Math.random()*1400}ms`;
      confettiRoot.appendChild(el);
      setTimeout(()=>el.remove(), 4200);
    }
  }

  // Crear corazones flotantes dentro de la carta
  function spawnHearts(amount){
    const colors = ['#ff4d6d','#ff8fb3','#ff6b9a'];
    for(let i=0;i<amount;i++){
      const h = document.createElement('div');
      h.className = 'heart';
      h.style.left = (10 + Math.random()*80) + '%';
      h.style.top = (60 + Math.random()*30) + '%';
      h.style.fontSize = `${12 + Math.random()*26}px`;
      h.style.color = colors[Math.floor(Math.random()*colors.length)];
      h.textContent = '‚ù§';
      heartsRoot.appendChild(h);
      setTimeout(()=>h.remove(), 3800 + Math.random()*1200);
    }
    setTimeout(()=>spawnHearts(Math.max(6, Math.floor(amount/2))), 900);
  }

  // Crear bot√≥n No que camina por la pantalla cuando se acaban las vidas
  function createMovingHiddenNo(){
    const m = document.createElement('button');
    m.id = 'movingNo';
    m.textContent = 'No';
    m.className = 'btn no';
    m.style.position = 'fixed';
    m.style.opacity = '0.85';
    m.style.zIndex = 80;
    document.body.appendChild(m);

    function randomPos(el){
      const padding = 12;
      const left = Math.floor(Math.random()*(window.innerWidth - el.offsetWidth - padding)) + padding;
      const top = Math.floor(Math.random()*(window.innerHeight - el.offsetHeight - padding)) + padding;
      el.style.left = left + 'px';
      el.style.top = top + 'px';
    }

    // mover cada 700ms como si caminara
    randomPos(m);
    movingNoInterval = setInterval(()=>randomPos(m), 700);

    m.addEventListener('click', ()=>{
      clearInterval(movingNoInterval);
      m.remove();
      // mostrar pantalla negra final
      document.body.querySelectorAll('.modal, .center, .card').forEach(n=>n.classList.add('hidden'));
      finalBlack.classList.remove('hidden');
    });
  }
});
    </script>
  </body>
</html>
